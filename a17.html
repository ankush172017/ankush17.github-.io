<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Song App Pro</title>
    <style>
        /* --- ‡§¨‡•á‡§π‡§§‡§∞ ‡§°‡§ø‡•õ‡§æ‡§á‡§® (CSS) --- */
        :root {
            --primary-color: #00a884; /* WhatsApp Green */
            --bg-color: #e9edef;
            --light-color: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: var(--bg-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Style */
        .header {
            background-color: var(--primary-color);
            color: var(--light-color);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            z-index: 10;
        }

        .logo {
            font-size: 22px;
            font-weight: 600;
        }

        .header-icons span {
            margin-left: 20px;
            font-size: 18px;
            cursor: pointer;
        }

        /* Chat List */
        .chat-list-container {
            flex: 1;
            overflow-y: auto;
            background: var(--light-color);
        }

        .chat-item {
            padding: 12px 15px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #f0f2f5;
            transition: background 0.2s;
            cursor: pointer;
        }

        .chat-item:hover {
            background-color: #f5f6f6;
        }

        .avatar {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            margin-right: 15px;
            background-size: cover;
            background-position: center;
            flex-shrink: 0;
        }

        .chat-info {
            flex: 1;
        }

        .chat-info h4 {
            margin: 0 0 5px 0;
            font-size: 17px;
            color: #111b21;
        }

        .chat-info p {
            margin: 0;
            color: #667781;
            font-size: 15px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Floating Camera Button */
        .fab-camera {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--primary-color);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 28px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            cursor: pointer;
            border: none;
            transition: transform 0.2s;
        }

        .fab-camera:active {
            transform: scale(0.95);
        }

        /* --- ‡§´‡•ã‡§ü‡•ã ‡§è‡§°‡§ø‡§ü‡§∞ (Modal) --- */
        #editor-modal {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #111b21;
            z-index: 100;
            flex-direction: column;
        }

        .editor-header {
            padding: 15px;
            color: white;
            display: flex;
            justify-content: space-between;
            background: rgba(0,0,0,0.2);
        }

        .canvas-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            padding: 20px;
        }

        canvas {
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .sticker-panel {
            background: #202c33;
            padding: 15px;
            display: flex;
            gap: 10px;
            overflow-x: auto;
            border-top: 1px solid #374045;
        }

        .sticker-btn {
            background: #374045;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 14px;
            white-space: nowrap;
        }
        
        .sticker-btn img {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .action-panel {
             background: #202c33;
             padding: 15px;
             display: flex;
             justify-content: space-around;
        }

        .btn-action {
            background: transparent;
            border: none;
            color: var(--primary-color);
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            padding: 10px 20px;
        }
        .btn-close { color: #ef5350; }

        input[type="file"] { display: none; }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo">Song</div>
        <div class="header-icons">
            <span>üîç</span>
            <span>‚ãÆ</span>
        </div>
    </div>

    <div class="chat-list-container">
        <div class="chat-item">
            <div class="avatar" style="background-image: url('https://i.pravatar.cc/150?img=3');"></div>
            <div class="chat-info">
                <h4>‡§Ö‡§Æ‡§ø‡§§ ‡§ï‡•Å‡§Æ‡§æ‡§∞</h4>
                <p>‡§≠‡§æ‡§à ‡§µ‡•ã ‡§´‡•ã‡§ü‡•ã ‡§≠‡•á‡§ú‡§®‡§æ...</p>
            </div>
        </div>
        <div class="chat-item">
            <div class="avatar" style="background-image: url('https://i.pravatar.cc/150?img=5');"></div>
            <div class="chat-info">
                <h4>‡§™‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∂‡§∞‡•ç‡§Æ‡§æ</h4>
                <p>üì∑ ‡§´‡•ã‡§ü‡•ã</p>
            </div>
        </div>
        <div class="chat-item">
            <div class="avatar" style="background-image: url('https://i.pravatar.cc/150?img=8');"></div>
            <div class="chat-info">
                <h4>‡§∞‡§æ‡§π‡•Å‡§≤ ‡§µ‡§∞‡•ç‡§Æ‡§æ</h4>
                <p>‡§ï‡§≤ ‡§Æ‡§ø‡§≤‡§§‡•á ‡§π‡•à‡§Ç!</p>
            </div>
        </div>
    </div>

    <input type="file" id="fileInput" accept="image/*">
    <button class="fab-camera" onclick="document.getElementById('fileInput').click()">üì∑</button>

    <div id="editor-modal">
        <div class="editor-header">
            <span onclick="closeEditor()" style="cursor:pointer;">‚¨ÖÔ∏è Back</span>
            <span>Edit Photo</span>
            <span></span>
        </div>
        
        <div class="canvas-container">
            <canvas id="photoCanvas"></canvas>
        </div>

        <div class="sticker-panel">
            <p style="color: #8696a0; margin: auto 10px; font-size: 14px;">Add Face Sticker:</p>
            <button class="sticker-btn" onclick="addSticker('https://via.placeholder.com/100x100/FF5733/ffffff?text=MODI')">
                <img src="https://via.placeholder.com/30/FF5733/ffffff?text=M" alt=""> ‡§Æ‡•ã‡§¶‡•Ä
            </button>
            <button class="sticker-btn" onclick="addSticker('https://via.placeholder.com/100x100/33FF57/ffffff?text=TRUMP')">
                <img src="https://via.placeholder.com/30/33FF57/ffffff?text=T" alt=""> ‡§ü‡•ç‡§∞‡§Æ‡•ç‡§™
            </button>
            <button class="sticker-btn" onclick="addSticker('https://via.placeholder.com/100x100/3357FF/ffffff?text=AMBANI')">
                <img src="https://via.placeholder.com/30/3357FF/ffffff?text=A" alt=""> ‡§Ö‡§Ç‡§¨‡§æ‡§®‡•Ä
            </button>
        </div>

        <div class="action-panel">
             <button class="btn-action btn-close" onclick="closeEditor()">‚ùå Cancel</button>
             <button class="btn-action" onclick="downloadImage()">üíæ Save Photo</button>
        </div>
    </div>

    <script>
        // --- ‡§ú‡§æ‡§µ‡§æ‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü (Logic) ---
        const fileInput = document.getElementById('fileInput');
        const modal = document.getElementById('editor-modal');
        const canvas = document.getElementById('photoCanvas');
        const ctx = canvas.getContext('2d');
        let currentImage; // ‡§Æ‡•Ç‡§≤ ‡§´‡•ã‡§ü‡•ã ‡§ï‡•ã ‡§Ø‡§æ‡§¶ ‡§∞‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è

        // 1. ‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡§æ
        fileInput.addEventListener('change', function(e) {
            if(e.target.files && e.target.files[0]) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    currentImage = new Image();
                    currentImage.onload = function() {
                        // ‡§ï‡•à‡§®‡§µ‡§æ‡§∏ ‡§ï‡•ã ‡§´‡•ã‡§ü‡•ã ‡§ï‡•á ‡§π‡§ø‡§∏‡§æ‡§¨ ‡§∏‡•á ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç (Max width 600px)
                        let maxWidth = 600;
                        let scale = Math.min(maxWidth / currentImage.width, 1);
                        canvas.width = currentImage.width * scale;
                        canvas.height = currentImage.height * scale;
                        
                        // ‡§´‡•ã‡§ü‡•ã ‡§°‡•ç‡§∞‡§æ ‡§ï‡§∞‡•á‡§Ç
                        ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);
                        modal.style.display = 'flex'; // ‡§è‡§°‡§ø‡§ü‡§∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç
                    }
                    currentImage.src = event.target.result;
                }
                reader.readAsDataURL(e.target.files[0]);
            }
        });

        // 2. ‡§∏‡•ç‡§ü‡§ø‡§ï‡§∞ (‡§ö‡•á‡§π‡§∞‡§æ) ‡§ú‡•ã‡•ú‡§®‡§æ
        function addSticker(imageUrl) {
            if (!currentImage) return;

            const stickerImg = new Image();
            stickerImg.onload = function() {
                // ‡§∏‡•ç‡§ü‡§ø‡§ï‡§∞ ‡§ï‡§æ ‡§∏‡§æ‡§á‡•õ ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç (‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§´‡•ã‡§ü‡•ã ‡§ï‡§æ 30%)
                const stickerSize = canvas.width * 0.3; 
                // ‡§∏‡•ç‡§ü‡§ø‡§ï‡§∞ ‡§ï‡•ã ‡§∏‡•á‡§Ç‡§ü‡§∞ ‡§Æ‡•á‡§Ç ‡§≤‡§ó‡§æ‡§Ø‡•á‡§Ç
                const x = (canvas.width - stickerSize) / 2;
                const y = (canvas.height - stickerSize) / 2;
                
                // ‡§∏‡•ç‡§ü‡§ø‡§ï‡§∞ ‡§°‡•ç‡§∞‡§æ ‡§ï‡§∞‡•á‡§Ç
                ctx.drawImage(stickerImg, x, y, stickerSize, stickerSize*(stickerImg.height/stickerImg.width));
            }
            // ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£: ‡§Ö‡§∏‡§≤‡•Ä ‡§ê‡§™ ‡§Æ‡•á‡§Ç ‡§Ø‡§π‡§æ‡§Å ‡§®‡•á‡§§‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§™‡§æ‡§∞‡§¶‡§∞‡•ç‡§∂‡•Ä (Transparent PNG) ‡§´‡•ã‡§ü‡•ã ‡§ï‡§æ ‡§≤‡§ø‡§Ç‡§ï ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è
            stickerImg.src = imageUrl;
            // ‡§Ø‡§π ‡§≤‡§æ‡§á‡§® ‡§ï‡•ç‡§∞‡•â‡§∏-‡§ì‡§∞‡§ø‡§ú‡§ø‡§® ‡§á‡§Æ‡•á‡§ú ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à
            stickerImg.crossOrigin = "Anonymous"; 
        }

        // 3. ‡§è‡§°‡§ø‡§ü‡§∞ ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡§®‡§æ
        function closeEditor() {
            modal.style.display = 'none';
            fileInput.value = '';
            ctx.clearRect(0, 0, canvas.width, canvas.height); // ‡§ï‡•à‡§®‡§µ‡§æ‡§∏ ‡§∏‡§æ‡•û ‡§ï‡§∞‡•á‡§Ç
            currentImage = null;
        }

        // 4. ‡§´‡•ã‡§ü‡•ã ‡§∏‡•á‡§µ ‡§ï‡§∞‡§®‡§æ
        function downloadImage() {
            const link = document.createElement('a');
            link.download = 'song_app_photo.png';
            // ‡§π‡§æ‡§à ‡§ï‡•ç‡§µ‡§æ‡§≤‡§ø‡§ü‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è
            link.href = canvas.toDataURL('image/png', 1.0);
            link.click();
        }
    </script>
</body>
</html>
